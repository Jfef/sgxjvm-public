buildscript {
    repositories {
        jcenter()
        mavenCentral()
    }
    dependencies {
        classpath "com.r3.sgx:sgx-jvm-plugin:$oblivium_version"
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

apply plugin: 'kotlin'
apply plugin: 'com.r3.sgx'

repositories {
    jcenter()
    mavenLocal()
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version"
    implementation "com.r3.sgx:api-core-enclave:$oblivium_version"
    implementation "org.bouncycastle:bcprov-jdk15on:$bouncycastle_version"

    testImplementation "org.jetbrains.kotlin:kotlin-test:$kotlin_version"
    testImplementation "com.r3.sgx:enclave-testing:$oblivium_version"
}

shadowJar {
    baseName = "rng-enclave"
    zip64 = true

    manifest {
        attributes("Enclave-Class": "com.r3.sgx.enclave.rng.RngEnclave")
    }
}

sgxTest {
    type = "Simulation"
}