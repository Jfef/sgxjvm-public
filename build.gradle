buildscript {
    apply from: 'credentials.gradle', to: it

    dependencies {
        classpath "com.r3.sgx:sgx-jvm-plugin-enclave:$sgxjvm_version"
        classpath "com.r3.sgx:sgx-jvm-plugin-host:$sgxjvm_version"
    }
}

plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.2.71' apply false
}

import org.jetbrains.kotlin.gradle.tasks.KotlinCompile

allprojects { subProject ->
    apply from: "$rootDir/credentials.gradle", to: subProject
    group 'com.r3.sgx'

    repositories {
        mavenCentral()
        jcenter()
    }

    tasks.withType(JavaCompile) {
        sourceCompatibility = 1.8
        targetCompatibility = 1.8
    }

    tasks.withType(KotlinCompile) {
        kotlinOptions {
            jvmTarget = '1.8'
            freeCompilerArgs = [ '-Xjvm-default=enable' ]
        }
    }

    tasks.withType(Test) {
        systemProperty 'java.io.tmpdir', buildDir.absolutePath
    }
}

wrapper {
    gradleVersion = "5.2.1"
    distributionType = Wrapper.DistributionType.ALL
}
